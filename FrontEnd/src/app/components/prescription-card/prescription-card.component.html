<mat-card class="prescription-card">
  <mat-card-header>
    <mat-card-subtitle>{{ prescription.courseOfAction || 'No course of action specified' }}</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <p *ngIf="prescription.dosageInstructions"><strong>Dosage:</strong> {{ prescription.dosageInstructions }}</p>
    <p *ngIf="prescription.duration"><strong>Duration:</strong> {{ prescription.duration }}</p>

    <div class="medications-list" *ngIf="prescription.medications && prescription.medications.length > 0">
      <div class="medication-item" *ngFor="let medication of prescription.medications; let i = index">
        <div class="medication-header">
          <span class="medication-number">{{ i + 1 }}.</span>
          <span class="medication-name" (click)="toggleMedicationInfo(medication)">
                        {{ medication.name || 'Unknown medication' }}
                    </span>
          <span class="molecule-name" (click)="toggleMoleculeInfo(medication)">
                        {{ medication.molecule || 'Unknown molecule' }}
                    </span>
        </div>
        <div class="posologie">
          {{ medication.posologie || 'No dosage information available' }}
        </div>

        <div class="medication-info" *ngIf="selectedMedication === medication && showMedicationInfo && medication.infosMedicament">
          <h4>Medication Information</h4>
          <p>{{ medication.infosMedicament }}</p>
        </div>

        <div class="molecule-info" *ngIf="selectedMedication === medication && showMoleculeInfo && medication.infosMolecule">
          <h4>Molecule Information</h4>
          <p>{{ medication.infosMolecule }}</p>
        </div>
      </div>
    </div>

    <div *ngIf="!prescription.medications || prescription.medications.length === 0" class="no-medications">
      <p>No medications specified for this prescription.</p>
    </div>
  </mat-card-content>
</mat-card>
